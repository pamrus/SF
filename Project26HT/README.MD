# Модуль 26. Введение в многопоточное программирование.
# 26.9. Итоговое задание
 
**Задача:** реализуйте подсчёт суммы элементов массива несколькими потоками.
 - Массив случайных чисел размером **N** должен разбиваться на **M** равных частей **(M < N)**, каждая из которых выполняется в отдельном потоке.
 - Каждый поток вычисляет сумму элементов своей части.
 - По завершении выполнения потоков, вычисляется общая сумма массива.
**Входные переменные:**
  N — размер массива;
  M — количество частей, на которые будет разбит массив.
**Результат:** сумма элементов массива.


> **Пожелания к выполнению задания**
1. Используйте в решении принципы ООП, учитывайте производительность программы.
2. Выполните анализ результата работы программы. Для этого предлагаем вам сравнить время вычисления итоговой суммы элементов массива с использованием нескольких потоков и время подсчёта суммы элементов массива в основном потоке (без разбиения на части).


## Заготовка решения

### Архитектура

Для хранения случайных чисел создан класс *randomVector* на базе std::vector, 
который инициализируется нормально-распределёнными псевдослучайными вещественными значениями в конструкторе.
Отсутствие "неслучайных" значений гарантируется запретом всех модифицирующих методов базового класса (*operator[]* и *at()* переопределены).
Класс содержит метод подсчёта суммы элементов с доступом по *operator()* - реализация функционального объекта.

Работа с потоками выполнена в двух подзадачах:
> 1. распараллеливание процесса генерации случайных значений: потоки инициализируются лямбда-функцией, содержащей вызов конструктора класса *randomVector*;
> 2. распараллеливание процесса вычисления суммы элементов: потоки инициализируются функциональными объектами, которыми и являются объекты класса *randomVector*.

### Входные параметры

В файле *main.cpp* задаются 3 константы:
> - *memoryUsage* - объём памяти для хранения случайных чисел в мегабайтах;
> - *idealSum* - значение, к которому должна стремиться сумма чисел;
> - *relativeError* - параметр ошибки ГПСЧ (отношение среднеквадратического отклонения к математическому ожиданию в процентах).

### Ход работы
> 1. Вначале происходит определение числа доступных ядер **M** (на это число потоков будет распределена обработка).
> 2. В разных потоках осуществляется генерация значений для **M**-объектов класса *randomVector* с подсчётом времени генерации.
> 3. В разных потоках осуществляется вычисление сумм элементов массивов с подсчётом времени обработки.
> 4. Выводятся результаты многопоточной обработки.
> 5. Создаётся и инициализируется случайными значениями единственный экземпляр класса *randomVector* большего в **M** раз размера.
> 6. Выводятся результаты однопоточной обработки.
> 7. Выводятся отношения времён обработки в одно- и многопоточном режиме.


Решение: Александр Павлинов 2022.02.24
